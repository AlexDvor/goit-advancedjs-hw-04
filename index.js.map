{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nclass Pixabay {\n  #API_KEY = '22579303-973b9b71134c76d3c38c0933d';\n  currentPage = 1;\n  queryField = '';\n\n  #getSearchParams(query) {\n    return {\n      key: this.#API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: this.currentPage,\n      per_page: 15,\n    };\n  }\n\n  incrementPage() {\n    this.currentPage++;\n  }\n\n  resetPage() {\n    this.currentPage = 1;\n  }\n\n  async getPhotoByQuery(query) {\n    this.queryField = query;\n    const response = await axios.get('', {\n      params: this.#getSearchParams(query),\n    });\n    console.log(response);\n    return response.data;\n  }\n}\n\nexport const API = new Pixabay();\n","export const createImgCard = ({\n  downloads = 0,\n  comments = 0,\n  likes = 0,\n  views = 0,\n  webformatURL,\n  largeImageURL,\n  tags,\n}) => {\n  const refTag = tags.split(',')[0] || '';\n  return `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=${largeImageURL}>\n        <div class='gallery-thumb-image'>\n          <img class=\"gallery-image\" src=${webformatURL} data-source=${largeImageURL} alt=${refTag} />\n        </div>\n        <div class='wrapper-info'>\n          <div class='info'>\n            <p>Likes</p>\n            <p>${likes}</p>\n          </div>\n          <div class='info'>\n            <p>Views</p>\n            <p>${views}</p>\n          </div>\n          <div class='info'>\n            <p>Comments</p>\n            <p>${comments}</p>\n          </div>\n          <div class='info'>\n            <p>Downloads</p>\n            <p>${downloads}</p>\n          </div>\n        </div>\n      </a>\n    </li>\n`;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport { API } from './js/pixabay-api';\nimport { createImgCard } from './js/render-functions';\nimport iziToast from 'izitoast';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  imgWrap: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.js-load-more-btn'),\n};\n\nconst messageForUser = (ms, type) => {\n  if (type === 'error') {\n    iziToast.error({\n      message: ms,\n      position: 'topRight',\n    });\n  } else if (type === 'warning') {\n    iziToast.warning({\n      message: ms,\n      position: 'topRight',\n    });\n  } else {\n    iziToast.show({\n      message: ms,\n      position: 'topRight',\n    });\n  }\n};\n\nconst onClickLoadMoreBtn = async e => {\n  API.incrementPage();\n  try {\n    const { hits, total, totalHits } = await API.getPhotoByQuery(\n      API.queryField\n    );\n\n    if (hits.length === 0) {\n      messageForUser(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'error'\n      );\n      return;\n    }\n\n    const createGallery = hits.map(item => createImgCard(item)).join('');\n    refs.imgWrap.insertAdjacentHTML('beforeend', createGallery);\n    new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      overlayOpacity: 0.9,\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst onSubmitBtn = async e => {\n  e.preventDefault();\n  const form = e.target;\n  const formData = new FormData(form);\n  const searchField = formData.get('search-field').trim();\n\n  if (!searchField) {\n    messageForUser(\n      'The search field is empty. Please enter text to search.',\n      'warning'\n    );\n    return;\n  }\n\n  refs.loader.classList.add('is-loaded');\n  API.resetPage();\n\n  try {\n    const { hits, total, totalHits } = await API.getPhotoByQuery(searchField);\n\n    if (hits.length === 0) {\n      messageForUser(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'error'\n      );\n      return;\n    }\n\n    const createGallery = hits.map(item => createImgCard(item)).join('');\n\n    refs.imgWrap.innerHTML = createGallery;\n    refs.loadMoreBtn.classList.remove('inactive');\n    refs.loadMoreBtn.addEventListener('click', onClickLoadMoreBtn);\n\n    new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      overlayOpacity: 0.9,\n    });\n  } catch (error) {\n    console.log(error);\n  } finally {\n    refs.loader.classList.remove('is-loaded');\n  }\n};\n\nrefs.form.addEventListener('submit', onSubmitBtn);\n"],"names":["axios","Pixabay","__privateAdd","_Pixabay_instances","_API_KEY","__publicField","query","response","__privateMethod","getSearchParams_fn","__privateGet","API","createImgCard","downloads","comments","likes","views","webformatURL","largeImageURL","tags","refTag","refs","messageForUser","ms","type","iziToast","onClickLoadMoreBtn","e","hits","total","totalHits","createGallery","item","SimpleLightbox","error","onSubmitBtn","form","searchField"],"mappings":"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"}